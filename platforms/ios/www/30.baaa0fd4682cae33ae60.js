(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"7Csk":function(n,l,t){"use strict";t.r(l);var e=t("CcnG"),o=t("ZZ/e"),i=t("lGQG"),u=t("XjJT"),s=function(n,l,t,e){return new(t||(t=Promise))(function(o,i){function u(n){try{r(e.next(n))}catch(l){i(l)}}function s(n){try{r(e.throw(n))}catch(l){i(l)}}function r(n){n.done?o(n.value):new t(function(l){l(n.value)}).then(u,s)}r((e=e.apply(n,l||[])).next())})},r=function(n,l){var t,e,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,e&&(o=2&i[0]?e.return:i[0]?e.throw||((o=e.return)&&o.call(e),0):e.next)&&!(o=o.call(e,i[1])).done)return o;switch(e=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,e=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=l.call(n,u)}catch(s){i=[6,s],e=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=function(){function n(n,l,t,e,o,i){this.router=n,this.activatedRoute=l,this.navCtrl=t,this.authService=e,this.wpApiService=o,this.loadingCtrl=i,this.passedId=null,this.msgCotent="",this.isLoading=!0}return n.prototype.showLoading=function(){return s(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,this.loadingCtrl.create({spinner:null,message:'<img src="/assets/img/loading.gif" />',cssClass:"page-loading new-loader"})];case 1:return[4,n.sent().present()];case 2:return[2,n.sent()]}})})},n.prototype.hideLoading=function(){return s(this,void 0,void 0,function(){var n=this;return r(this,function(l){return this.isLoading&&setTimeout(function(){n.isLoading=!1,n.loadingCtrl.dismiss()},500),[2]})})},n.prototype.getMessages=function(){return s(this,void 0,void 0,function(){var n=this;return r(this,function(l){switch(l.label){case 0:return this.showLoading(),[4,this.authService.getUserData2().then(function(l){var t=l;console.log(t),console.log(n.authService.userFullData),n.userToken=t.token,n.userAvatar=n.wpApiService.userProfile.avatar,n.userData=t,n.passedId=n.activatedRoute.snapshot.paramMap.get("msg_id")})];case 1:return l.sent(),[4,this.wpApiService.getMessage(this.authService.userToken,this.passedId).subscribe(function(l){n.hideLoading(),n.allMessages=l.messages,n.oUserName=l.contact,console.log(l),setTimeout(function(){n.content.scrollToBottom()},500)})];case 2:return l.sent(),[2]}})})},n.prototype.sendMessage=function(n){return s(this,void 0,void 0,function(){return r(this,function(l){switch(l.label){case 0:return[4,this.wpApiService.sendMessage(this.authService.userToken,this.passedId,n).subscribe(function(n){console.log(n)})];case 1:return l.sent(),[2]}})})},n.prototype.goBack=function(){this.navCtrl.back()},n.prototype.ngOnInit=function(){this.getMessages()},n.prototype.addNewMessage=function(){return s(this,void 0,void 0,function(){var n,l=this;return r(this,function(t){return""!==this.msgCotent&&(n={content:this.msgCotent,sender_id:this.userData.user_id,sender_name:this.userData.user_display_name,sender_avatar:this.userAvatar,date:Date.now(),avatar:"",me:1},console.log(n),this.sendMessage(this.msgCotent),this.allMessages.push(n),this.msgCotent="",setTimeout(function(){l.content.scrollToBottom()},100)),[2]})})},n}(),c=function(){return function(){}}(),g=t("pMnS"),b=t("Ip0R"),d=t("oBZk"),p=t("gIcY"),h=t("ZYCi"),f=e.nb({encapsulation:0,styles:[["ion-list.messages[_ngcontent-%COMP%]   div.single[_ngcontent-%COMP%]{margin-bottom:10px}ion-list.messages[_ngcontent-%COMP%]   div.single[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{margin-bottom:5px}ion-list.messages[_ngcontent-%COMP%]   div.single[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:0;z-index:2}ion-list.messages[_ngcontent-%COMP%]   div.single[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:56px;height:56px}ion-list.messages[_ngcontent-%COMP%]   div.single[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div.message[_ngcontent-%COMP%]{padding:5px;display:inline-block;margin-top:10px}ion-list.messages[_ngcontent-%COMP%]   div.single[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div.message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px;white-space:pre-line}ion-list.messages[_ngcontent-%COMP%]   div.single[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]:last-child{z-index:1}ion-list.messages[_ngcontent-%COMP%]   div.single.mine[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div.message[_ngcontent-%COMP%]{background:#f5f5f5;border-radius:0 10px 10px 0;margin-left:-15px;padding-left:15px}ion-list.messages[_ngcontent-%COMP%]   div.single.mine[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div.message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}ion-list.messages[_ngcontent-%COMP%]   div.single.other[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{flex-direction:row-reverse;text-align:right}ion-list.messages[_ngcontent-%COMP%]   div.single.other[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div.message[_ngcontent-%COMP%]{background:var(--ion-color-primary);color:#fff;font-size:16px;font-weight:500;margin-right:-15px;padding-right:20px;border-radius:10px 0 0 10px}ion-footer[_ngcontent-%COMP%]{padding-bottom:10px;background:#fff}ion-footer[_ngcontent-%COMP%]:before{display:none}ion-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start:10px;--padding-top:0;--padding-bottom:0;margin-left:10px;--background:#f5f5f5;--border-radius:8px}ion-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{font-size:17px;line-height:20px;min-height:30px}ion-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0;padding:0;--padding-start:5px;--padding-end:5px;height:38px}ion-footer[_ngcontent-%COMP%]   ion-item.item-has-value[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{display:block}ion-footer[_ngcontent-%COMP%]   ion-item.item-has-focus[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%], ion-footer[_ngcontent-%COMP%]   ion-item.item-has-value[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{--background:transparent;--background-activated:transparent;background:0 0;--border-color:transparent;border-radius:0;--inner-border-width:0;border:0 solid transparent;--padding-start:0px;--padding-end:0px}ion-footer[_ngcontent-%COMP%]   ion-button.add[_ngcontent-%COMP%]{margin:0 0 0 -5px;padding:0;--padding-start:0;--padding-end:0}"]],data:{}});function m(n){return e.Hb(0,[(n()(),e.pb(0,0,null,null,13,"div",[["class","single"]],null,null,null,null,null)),e.ob(1,278528,null,0,b.h,[e.s,e.t,e.k,e.D],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(n()(),e.pb(2,0,null,null,11,"ion-row",[],null,null,null,d.Qb,d.L)),e.ob(3,49152,null,0,o.lb,[e.h,e.k,e.z],null,null),(n()(),e.pb(4,0,null,0,4,"ion-col",[["size","2"]],null,null,null,d.qb,d.l)),e.ob(5,49152,null,0,o.v,[e.h,e.k,e.z],{size:[0,"size"]},null),(n()(),e.pb(6,0,null,0,2,"ion-avatar",[],null,null,null,d.gb,d.b)),e.ob(7,49152,null,0,o.h,[e.h,e.k,e.z],null,null),(n()(),e.pb(8,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),e.pb(9,0,null,0,4,"ion-col",[["size","10"]],null,null,null,d.qb,d.l)),e.ob(10,49152,null,0,o.v,[e.h,e.k,e.z],{size:[0,"size"]},null),(n()(),e.pb(11,0,null,0,2,"div",[["class","message"]],null,null,null,null,null)),(n()(),e.pb(12,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),e.Fb(13,null,["",""]))],function(n,l){n(l,1,0,"single",1==l.context.$implicit.me?"mine":"other"),n(l,5,0,"2"),n(l,10,0,"10")},function(n,l){n(l,8,0,l.context.$implicit.sender_avatar),n(l,13,0,l.context.$implicit.content)})}function C(n){return e.Hb(0,[e.Db(402653184,1,{content:0}),e.Db(402653184,2,{messageInput:0}),(n()(),e.pb(2,0,null,null,18,"ion-header",[],null,null,null,d.vb,d.q)),e.ob(3,49152,null,0,o.D,[e.h,e.k,e.z],null,null),(n()(),e.pb(4,0,null,0,16,"ion-toolbar",[],null,null,null,d.ic,d.db)),e.ob(5,49152,null,0,o.Eb,[e.h,e.k,e.z],null,null),(n()(),e.pb(6,0,null,0,5,"ion-buttons",[["slot","start"]],null,null,null,d.kb,d.f)),e.ob(7,49152,null,0,o.n,[e.h,e.k,e.z],null,null),(n()(),e.pb(8,0,null,0,3,"ion-button",[["color","primary"],["router-direction","back"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.goBack()&&e),e},d.jb,d.e)),e.ob(9,49152,null,0,o.m,[e.h,e.k,e.z],{color:[0,"color"]},null),(n()(),e.pb(10,0,null,0,1,"ion-icon",[["name","arrow-back"]],null,null,null,d.wb,d.r)),e.ob(11,49152,null,0,o.E,[e.h,e.k,e.z],{name:[0,"name"]},null),(n()(),e.pb(12,0,null,0,2,"ion-title",[],null,null,null,d.gc,d.bb)),e.ob(13,49152,null,0,o.Cb,[e.h,e.k,e.z],null,null),(n()(),e.Fb(14,0,[" Message with "," "])),(n()(),e.pb(15,0,null,0,5,"ion-buttons",[["slot","end"]],null,null,null,d.kb,d.f)),e.ob(16,49152,null,0,o.n,[e.h,e.k,e.z],null,null),(n()(),e.pb(17,0,null,0,3,"ion-button",[["router-direction","back"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.goBack()&&e),e},d.jb,d.e)),e.ob(18,49152,null,0,o.m,[e.h,e.k,e.z],null,null),(n()(),e.pb(19,0,null,0,1,"ion-icon",[["src","/assets/icons/close.svg"]],null,null,null,d.wb,d.r)),e.ob(20,49152,null,0,o.E,[e.h,e.k,e.z],{src:[0,"src"]},null),(n()(),e.pb(21,0,null,null,6,"ion-content",[["padding",""]],null,null,null,d.rb,d.m)),e.ob(22,49152,[[1,4],["content",4]],0,o.w,[e.h,e.k,e.z],{scrollEvents:[0,"scrollEvents"]},null),e.ob(23,16384,null,0,o.f,[e.k],null,null),(n()(),e.pb(24,0,null,0,3,"ion-list",[["class","messages"]],null,null,null,d.Jb,d.D)),e.ob(25,49152,null,0,o.Q,[e.h,e.k,e.z],null,null),(n()(),e.gb(16777216,null,0,1,null,m)),e.ob(27,278528,null,0,b.i,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null),(n()(),e.pb(28,0,null,null,18,"ion-footer",[],null,null,null,d.tb,d.o)),e.ob(29,49152,null,0,o.B,[e.h,e.k,e.z],null,null),(n()(),e.pb(30,0,null,0,16,"ion-row",[],null,null,null,d.Qb,d.L)),e.ob(31,49152,null,0,o.lb,[e.h,e.k,e.z],null,null),(n()(),e.pb(32,0,null,0,14,"ion-col",[["size","12"]],null,null,null,d.qb,d.l)),e.ob(33,49152,null,0,o.v,[e.h,e.k,e.z],{size:[0,"size"]},null),(n()(),e.pb(34,0,null,0,12,"ion-item",[],null,null,null,d.Gb,d.w)),e.ob(35,49152,null,0,o.J,[e.h,e.k,e.z],null,null),(n()(),e.pb(36,0,null,0,6,"ion-textarea",[["placeholder","Write something here"],["rows","1"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,l,t){var o=!0,i=n.component;return"ionBlur"===l&&(o=!1!==e.zb(n,37)._handleBlurEvent(t.target)&&o),"ionChange"===l&&(o=!1!==e.zb(n,37)._handleInputEvent(t.target)&&o),"ngModelChange"===l&&(o=!1!==(i.msgCotent=t)&&o),o},d.ec,d.Z)),e.ob(37,16384,null,0,o.Sb,[e.k],null,null),e.Cb(1024,null,p.j,function(n){return[n]},[o.Sb]),e.ob(39,671744,null,0,p.o,[[8,null],[8,null],[8,null],[6,p.j]],{model:[0,"model"]},{update:"ngModelChange"}),e.Cb(2048,null,p.k,null,[p.o]),e.ob(41,16384,null,0,p.l,[[4,p.k]],null,null),e.ob(42,49152,[[2,4],["newMsgArea",4]],0,o.Ab,[e.h,e.k,e.z],{placeholder:[0,"placeholder"],rows:[1,"rows"]},null),(n()(),e.pb(43,0,null,0,3,"ion-button",[["color","primary"],["fill","clear"],["shape","round"],["size","large"],["slot","end"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.addNewMessage()&&e),e},d.jb,d.e)),e.ob(44,49152,null,0,o.m,[e.h,e.k,e.z],{color:[0,"color"],disabled:[1,"disabled"],fill:[2,"fill"],shape:[3,"shape"],size:[4,"size"]},null),(n()(),e.pb(45,0,null,0,1,"ion-icon",[["name","send"]],null,null,null,d.wb,d.r)),e.ob(46,49152,null,0,o.E,[e.h,e.k,e.z],{name:[0,"name"]},null)],function(n,l){var t=l.component;n(l,9,0,"primary"),n(l,11,0,"arrow-back"),n(l,20,0,"/assets/icons/close.svg"),n(l,22,0,!0),n(l,27,0,t.allMessages),n(l,33,0,"12"),n(l,39,0,t.msgCotent),n(l,42,0,"Write something here","1"),n(l,44,0,"primary",""==t.msgCotent,"clear","round","large"),n(l,46,0,"send")},function(n,l){n(l,14,0,l.component.oUserName),n(l,36,0,e.zb(l,41).ngClassUntouched,e.zb(l,41).ngClassTouched,e.zb(l,41).ngClassPristine,e.zb(l,41).ngClassDirty,e.zb(l,41).ngClassValid,e.zb(l,41).ngClassInvalid,e.zb(l,41).ngClassPending)})}function M(n){return e.Hb(0,[(n()(),e.pb(0,0,null,null,1,"app-message",[],null,null,null,C,f)),e.ob(1,114688,null,0,a,[h.m,h.a,o.Kb,i.a,u.a,o.Ib],null,null)],function(n,l){n(l,1,0)},null)}var v=e.lb("app-message",a,M,{},{},[]);t.d(l,"MessagePageModuleNgFactory",function(){return _});var _=e.mb(c,[],function(n){return e.wb([e.xb(512,e.j,e.bb,[[8,[g.a,v]],[3,e.j],e.x]),e.xb(4608,b.l,b.k,[e.u,[2,b.u]]),e.xb(4608,p.u,p.u,[]),e.xb(4608,o.c,o.c,[e.z,e.g]),e.xb(4608,o.Jb,o.Jb,[o.c,e.j,e.q]),e.xb(4608,o.Ob,o.Ob,[o.c,e.j,e.q]),e.xb(1073742336,b.b,b.b,[]),e.xb(1073742336,p.s,p.s,[]),e.xb(1073742336,p.f,p.f,[]),e.xb(1073742336,o.Gb,o.Gb,[]),e.xb(1073742336,h.o,h.o,[[2,h.u],[2,h.m]]),e.xb(1073742336,c,c,[]),e.xb(1024,h.k,function(){return[[{path:"",component:a}]]},[])])})}}]);